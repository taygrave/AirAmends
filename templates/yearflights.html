
<script>var data = {{airports_json | safe}};</script>
<script src="/static/useredits.js"></script>

<h2>{{year}}</h2>
    Your flights found for {{year}} are displayed below. Please confirm the report is correct. You can delete flights you never took by hovering over the row. You can add flights that were missed by entering their information at the top of the table.<br>
<!-- FIXME: this doesn't reload the page when it goes back tho -->
<a href="/get_flights">Go Back</a> 

<br><br>
<table name="report" id="report">
    <tr>
        <th>Purchased On:</th><th>Departing From:</th><th>Arriving In:</th><th>CO2e Emissions (mt)</th><th>Emissions Value (2015$)</th><th></th>
    </tr>
    
    <tr id="flightadd">
    <div name="flightadddiv" id="flightadddiv">
        <td><label for="date"></label><input type="date" value="{{year}}-06-01" name="purchase_date" class="form"></td>
        <td><label for="depart"></label><input type="text" name="depart" id="depart" class="form"></td>
        <td><label for="arrive"></label><input type="text" name="arrive" id="arrive" class="form"></td>
        <td>-</td>
        <td>-</td>
        <td><button class="btn btn-success" id="flightsubmit">&nbsp;&nbsp;&nbsp;ADD&nbsp;&nbsp;&nbsp;</button></td>
    </div>
    </tr>
    
    {% for flight in results_list %}
    <tr id={{"row-%d" % flight[4]}}>
        <td>{{flight[0]}}</td>
        <td>{{flight[1]}}</td>
        <td>{{flight[2]}}</td>
        <td class="emiss">{{'%0.2f' % flight[3]}}</td>
        <td class="priced">${{'%0.2f' % (flight[3]*g.carbon_price)}}</td>
        <td><button type="button" class="btn btn-danger" style="visibility: hidden" id="{{flight[4]}}" onclick="deleteFlight('{{flight[4]}}', '{{'row-%d' % flight[4]}}', '{{flight[3]}}')">DELETE</button></td>
    </tr>
    {% endfor %}
        
    <tr>
        <th>TOTALS</th>
        <th></th>
        <th></th>
        <th id="cTotal"></th>
        <th id="mTotal"></th>
        <th></th>
    </tr>
</table>
<br><br><br><br>
